export default {
  async afterCreate({ params, result }) {
    const entity = await strapi.db
      .query("api::vulnerability-info.vulnerability-info")
      .findOne({ where: { id: result.id }, populate: ["spatial_grid_cell"] });
    await strapi
      .service("api::spatial-grid-cell.spatial-grid-cell")
      .recalculateVulnerability(entity.spatial_grid_cell.id);
  },
  async afterUpdate({ params, result }) {
    const entity = await strapi.db
      .query("api::vulnerability-info.vulnerability-info")
      .findOne({ where: { id: result.id }, populate: ["spatial_grid_cell"] });
    await strapi
      .service("api::spatial-grid-cell.spatial-grid-cell")
      .recalculateVulnerability(entity.spatial_grid_cell.id);
  },
};
